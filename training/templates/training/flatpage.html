{% extends 'training/base_with_navigation.html' %}
{% load common_extras %}
{% load pipeline %}
{% load i18n %}

{% block title_prepend %}{{ flatpage.title }} - {{ training.name }} - {% endblock title_prepend %}

{% block meta %}
  {% firstof flatpage.title as title %}
  {% firstof flatpage.thumbnail_m_url training.thumbnail_m_url as image_url %}
  {% with description=flatpage.content|truncatewords:25 %}
    {% include 'common/components/meta.html'  %}
  {% endwith %}
{% endblock %}


{% block nexted_content %}
  {% if flatpage.header %}
    {% include "common/components/helpers/image_resize.html" with alt=asset.name classes="img-fluid img-width-100 rounded mb-3" img_source=flatpage.header width="820" %}
  {% endif %}

  <div class="row">
    <div class="col">

      <div class="row align-items-start">
        <div class="col-12 col-md mb-2 mb-md-3">
          <p class="subtitle small">
            {% if training.is_free %}
              {% include "common/components/cards/pill.html" with label='Free' %}
            {% endif %}
            {{ training.name }}
          </p>
          <h2 class="mb-0">{{ flatpage.title }}</h2>
        </div>
        <div class="col-12 col-md-auto mb-2 mb-md-0 mt-0 mt-md-3">
          <div class="button-toolbar-container">

            <div class="button-toolbar">

              {% if user.is_staff %}
                <a href="{{ flatpage.admin_url }}" class="btn btn-sm btn-icon btn-dark">
                  <i class="i-edit btn-material-icons"></i>
                  <span>Edit</span>
                </a>
              {% endif %}

              <button data-bs-toggle="dropdown" class="btn btn-sm btn-icon btn-dark">
                <i class="material-icons btn-material-icons">more_horiz</i>
              </button>
              <div class="dropdown-menu dropdown-menu-end">
                <a href="https://projects.blender.org/studio/blender-studio/issues/new" target="_blank"
                  class="dropdown-item">
                  <i class="i-flag"></i>
                  <span>{% blocktrans %}Report Problem{% endblocktrans %}</span>
                </a>
              </div>

            </div>
          </div>
        </div>
      </div>

      <section class="mb-3 markdown-text">{% with_shortcodes flatpage.content_html %}</section>
    </div>


  </div>

{% endblock nexted_content %}

{% block scripts %}
  {% javascript 'training' %}
{% endblock scripts %}
