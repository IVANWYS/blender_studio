{% if caption %}
{% if link %}
{% if link == 'self' %}

<figure class="figure blog-image {{ class }}">
  <div class="image-zoom-wrapper">
    <a href="{{ static_asset.source.url }}" target="_blank">
      {% include "common/components/helpers/image_set.html" with alt=caption classes=classes img_source=static_asset.source xsmall_width="600" small_width="740" medium_width="740" large_width="940" xlarge_width="940" %}
    </a>
    {% if zoom %}
    <button class="btn btn-darkhighlight-xstrong btn-sm btn-icon image-zoom" data-image="{{ static_asset.source.url }}">
      <i class="material-icons btn-material-icons">zoom_in</i>
    </button>
    {% endif %}
  </div>
  <figcaption class="figure-caption">{{ caption }}</figcaption>
</figure>

{% else %}

<figure class="figure blog-image {{ class }}">
  <div class="image-zoom-wrapper">
    <a href="{{ link }}" target="_blank">
      {% include "common/components/helpers/image_set.html" with alt=caption classes=classes img_source=static_asset.source xsmall_width="600" small_width="740" medium_width="740" large_width="940" xlarge_width="940" %}
    </a>
    {% if zoom %}
    <button class="btn btn-darkhighlight-xstrong btn-sm btn-icon image-zoom" data-image="{{ static_asset.source.url }}">
      <i class="material-icons btn-material-icons">zoom_in</i>
    </button>
    {% endif %}
  </div>
  <figcaption class="figure-caption">{{ caption }}</figcaption>
</figure>

{% endif %}

{% else %}
<figure class="figure blog-image {{ class }}">
  <div class="image-zoom-wrapper">
    {% include "common/components/helpers/image_set.html" with alt=caption classes=classes img_source=static_asset.source xsmall_width="600" small_width="740" medium_width="740" large_width="940" xlarge_width="940" %}

    {% if zoom %}
    <button class="btn btn-darkhighlight-xstrong btn-sm btn-icon image-zoom" data-image="{{ static_asset.source.url }}">
      <i class="material-icons btn-material-icons">zoom_in</i>
    </button>
    {% endif %}
  </div>
  <figcaption class="figure-caption">{{ caption }}</figcaption>

</figure>
{% endif %}
{% else %}

{% firstof class|default:""|add:" img-fluid blog-image" as classes %}
{% if link %}
{% if link == 'self' %}
<div class="image-zoom-wrapper">
  <a class="expand-image-links" href="{{ static_asset.source.url }}" target="_blank">
    {% include "common/components/helpers/image_set.html" with alt=static_asset.original_filename classes=classes img_source=static_asset.source xsmall_width="600" small_width="740" medium_width="740" large_width="940" xlarge_width="940" %}
  </a>
  {% if zoom %}
  <button class="btn btn-darkhighlight-xstrong btn-sm btn-icon image-zoom" data-image="{{ static_asset.source.url }}">
    <i class="material-icons btn-material-icons">zoom_in</i>
  </button>
  {% endif %}
</div>
{% else %}
<div class="image-zoom-wrapper">
  <a href="{{ link }}" target="_blank">
    {% include "common/components/helpers/image_set.html" with alt=static_asset.original_filename classes=classes img_source=static_asset.source xsmall_width="600" small_width="740" medium_width="740" large_width="940" xlarge_width="940" %}
  </a>
  {% if zoom %}
  <button class="btn btn-darkhighlight-xstrong btn-sm btn-icon image-zoom" data-image="{{ static_asset.source.url }}">
    <i class="material-icons btn-material-icons">zoom_in</i>
  </button>
  {% endif %}
</div>
{% endif %}

{% else %}
<div class="image-zoom-wrapper">
  {% include "common/components/helpers/image_set.html" with alt=static_asset.original_filename classes=classes img_source=static_asset.source xsmall_width="600" small_width="740" medium_width="740" large_width="940" xlarge_width="940" %}
  {% endif %}
  {% if zoom %}
  <button class="btn btn-darkhighlight-xstrong btn-sm btn-icon image-zoom" data-image="{{ static_asset.source.url }}">
    <i class="material-icons btn-material-icons">zoom_in</i>
  </button>
  {% endif %}
</div>

{% endif %}
