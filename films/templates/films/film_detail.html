{% extends 'films/base_films.html' %}
{% load static %}

{% block title_append %} - {{ film.title }}{% endblock title_append %}

{% block jumbotron %}
{% include "films/components/jumbotron_film.html" with film=film %}
{% endblock jumbotron %}

{% block content %}

<div class="container-xl pt-4">
  <section class="mb-4">
    {% if film.status != "2_released" %}
    <!-- Latest Updates -->

    <div class="row justify-content-center mb-3">
      <div class="col-md-6 text-center">
        <h2 class="mb-0">Latest Updates</h2>
        <p class="mb-0">Want to see more updates from {{ film.title }}?
          <a href="{% url 'film-production-logs' film.slug %}">See all production logs</a></p>
      </div>
    </div>

    <div id="activity-feed">
      {% if production_logs_page %}
      {% include "films/components/activity_feed.html" %}
      {% else %}
    </div>
    <div class="row mb-3">
      <div class="col text-center">
        <div class="bg-secondary py-4 rounded">
          <h3 class="mb-0">No production logs to show</h3>
        </div>
      </div>
    </div>
    {% endif %}
    <div class="row">
      <div class="col text-center">
        <p class="mb-0">Want to see more updates from {{ film.title }}?
          <a href="{% url 'film-production-logs' film.slug %}">See all production logs</a></p>
      </div>
    </div>
</div>


{% else %}

<div class="row justify-content-center mb-3">
  <div class="col-md-6 text-center">
    <h2 class="mb-0">Featured Content Gallery</h2>
    <p class="mb-0">Want to see more?
      <a href="{% url 'film-gallery' film.slug %}">Explore the Content Gallery</a></p>
  </div>
</div>

{% if featured_artwork %}

<div class="">
  <div class="files row grid">
    <div class="grid-sizer col-12 col-sm-6 col-md-4 col-lg-3"></div>
    {% for asset in featured_artwork %}
    {% if asset.is_published or request.user.is_superuser %}
    {% include "common/components/file.html" with asset=asset site_context="featured_artwork" card_sizes="col-12 col-sm-6 col-md-4 col-lg-3" %}
    {% endif %}
    {% endfor %}

  </div>
</div>
{% else %}
<div class="row">
  <div class="col text-center">
    <div class="bg-secondary py-4 rounded">
      <h3 class="mb-0">No Featured Artwork to display</h3>
    </div>
  </div>
</div>

{% endif %}

{% endif %}
</section>
</div>

{% endblock %}

{% block scripts_footer %}

<script>
  var $grid = $('.grid').masonry({
    itemSelector: '.grid-item',
    columnWidth: '.grid-sizer',
    percentPosition: true,
  });

  $grid.imagesLoaded().progress(function () {
    $grid.masonry('layout');
  });

</script>

{% endblock scripts_footer %}
