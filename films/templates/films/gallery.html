{% extends 'films/base_films.html' %}
{% load static %}
{% load film_extras %}

{% block bodyclasses %}
{% comment %} has-nav-drawer{% endcomment %}
has-secondary-nav
{% endblock bodyclasses %}

{% block nav_drawer%}
{% endblock nav_drawer %}

{% block content %}
<div class="container-xl pt-3">
  <div class="row">

    <div class="col-md-4 col-lg-3 mb-3 d-none d-md-block">
      {% block nested_nav_drawer %}
      <nav class="nav-drawer nested">
        <div class="nav-drawer-body">
          <div class="px-2 py-2 d-block d-md-none">
            <div class="input-group mb-0">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <i class="material-icons">search</i></span>
              </div><input class="form-control" type="text" placeholder="Search tags and keywords" />
            </div>
          </div>
          <div class="navbar-secondary d-md-none">
            <div class="navdrawer-offset">
              <div class="container-xl">
                <div class="list-group list-group-flush list-group-horizontal small px-2">
                  <a class="list-group-item" href="{% url 'film-list' %}">Films</a>
                  <a class="list-group-item" href="{% url 'training-home' %}">Training</a>
                  {% comment %} <a class="list-group-item" href="#">Services</a>{% endcomment %}
                  <a class="list-group-item" href="{% url 'post-list' %}">Blog</a>
                  <a class="list-group-item search" href="{% url 'search' %}">
                    <i class="material-icons icon-inline">search</i>
                  </a>
                </div>
              </div>
            </div>
          </div>

          {% block nav_drawer_inner %}

          <div class="drawer-nav-group">

            <div class="drawer-nav-dropdown-wrapper">

              <a class="drawer-nav-dropdown h3 " href="{% url 'film-gallery' film_slug=film.slug %}">
                <i class="material-icons mr-2">grade</i>
                Featured Artwork
              </a>

              {% if admin_change_href is not none %}
              <a href="{{ admin_change_href }}">edit</a>
              {% endif %}
            </div>
          </div>

          {% for collection, child_collections in collections.items %}

          <div class="drawer-nav-group">
            <div class="drawer-nav-dropdown-wrapper">

              <a class="drawer-nav-dropdown h3 {% if current_collection.parent != collection and current_collection != collection %}collapsed{% endif %}"
                href="{{ collection.url }}" {% if child_collections %}data-toggle="collapse"
                data-target="#collection-{{ collection.id }}" {% endif %}>
                <span class="drawer-nav-dropdown-text">
                  {{ collection.name }}
                </span>
                {% if child_collections %}
                <i class="material-icons">keyboard_arrow_down</i>
                {% endif %}

              </a>
              {% if user_can_edit_collection %}
              <a href="{{ collection.admin_url }}" class="btn btn-secondary btn-xs btn-icon btn-float">
                <i class="material-icons btn-material-icons">create</i>
              </a>
              {% endif %}
            </div>
            {% if child_collections %}
            <div
              class="collapse {% if current_collection.parent == collection or current_collection == collection %}show{% endif %}"
              id="collection-{{ collection.id }}">
              <ol class="drawer-nav-list ">

                {% for child_collection in child_collections %}
                <li class="drawer-nav-section">
                  <a href="{{ child_collection.url }}" class="drawer-nav-section-link">

                    <i class="material-icons">folder</i>
                    <h4>{{ child_collection.name }}</h4>

                  </a>
                  {% if user_can_edit_collection %}
                  <a href="{{ child_collection.admin_url }}" target="_blank"
                    class="btn btn-secondary btn-xs btn-float btn-icon">
                    <i class="material-icons btn-material-icons">create</i>
                  </a>
                  {% endif %}
                </li>

                {% endfor %}

              </ol>
            </div>
            {% endif %}
          </div>
          {% endfor %}

          {% endblock nav_drawer_inner %}
        </div>
      </nav>
      {% endblock nested_nav_drawer %}
    </div>

    <div class="col">
      {% block nested_content %}

      {% show_breadcrumbs %}

      {% block gallery_files %}

      <div>

        <div class="files">
          {% if featured_artwork %}
          <div class="card-columns">

            {% for asset in featured_artwork %}
            {% include "common/components/file.html" with asset=asset site_context="featured_artwork" %}
            {% endfor %}

          </div>
          {% else %}
          <div class="d-inline-block w-100">
            <div class="text-center">
              <div class="bg-secondary py-4 rounded">
                <h3 class="mb-0">No Featured Artwork to display</h3>
              </div>
            </div>
          </div>
          {% endif %}
        </div>

      </div>
      {% endblock gallery_files %}
      <div class="gallery-load-overlay">
        <div class="spinner-border text-primary" role="status">
          <span class="sr-only">Loading...</span>
        </div>
      </div>

      {% endblock nested_content%}
    </div>
  </div>
</div>
{% endblock content %}




{% block footer %}
<footer class="bg-navigation py-2">
  <div class="navdrawer-offset">
    <div class="container-xl">
      <div class="row">

        <div class="col-12">
          <div class="row">
            <div class="col-auto">
              <a href="#" class="small text-highlight-strong">Terms &amp; Conditions</a>
            </div>
            <div class="col-auto">
              <a href="#" class="small text-highlight-strong">Privacy Policy</a>
            </div>
            <div class="col-auto">
              <a href="#" class="small text-highlight-strong">Blender.org</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
{% endblock footer%}
