{% extends 'films/base_films.html' %}
{% load static %}

{% block bodyclasses %}
has-nav-drawer
nav-drawer-wide
{% endblock bodyclasses %}

{% block nav_drawer %}


<nav class="nav-drawer">
	<div class="nav-drawer-spacer">
	</div>
	<div class="nav-drawer-body">

		<div class="drawer-nav-header">
			<p class="subtitle">Gallery</p>
			<h2>{{ film.title }}</h2>
		</div>
		{% if featured_artwork %}
		<div class="drawer-nav-group">
			<ol class="drawer-nav-list">
				<li class="drawer-nav-section">
					<!-- TODO(Mike): active state JS -->
					<a href="{{ href }}" class="drawer-nav-section-link {% if active %}active{% endif %}">
						<div class="drawer-nav-section-icon">
							<i class="material-icons">view_carousel</i>
							<svg width="30" height="30" class="drawer-nav-section-icon-progress">
								<circle cx="15" cy="15" r="14" />
							</svg>
						</div>
						<div>
							<p class="subtitle x-small">Collection</p>
							<h4>Featured Artwork</h4>
						</div>
					</a>
					{% if admin_change_href is not none %}
					<a href="{{ admin_change_href }}">edit</a>
					{% endif %}
				</li>
			</ol>
		</div>
		{% endif %}
		{% for collection, child_collections in collections.items %}

		<div class="drawer-nav-group">
			<h3 class="drawer-nav-dropdown {% if collapsed %}collapsed{% endif %}" data-toggle="collapse"
				data-target="#collection-{{ collection.id }}">
				<i class="material-icons">keyboard_arrow_down</i>
				{{ collection.name }}
			</h3>
			<ol id="collection-{{ collection.id }}" class="drawer-nav-list collapse {% if not collapsed %}show{% endif %}">

				{% for child_collection in child_collections %}
				<li class="drawer-nav-section">
					<a href="{{ href }}" class="drawer-nav-section-link {% if active %}active{% endif %}">
						<div class="drawer-nav-section-icon">
							<i class="material-icons">view_carousel</i>
							<svg width="30" height="30" class="drawer-nav-section-icon-progress">
								<circle cx="15" cy="15" r="14" />
							</svg>
						</div>
						<div>
							<p class="subtitle x-small">Collection</p>
							<h4>{{ child_collection.name }}</h4>
						</div>
					</a>
					{% if admin_change_href is not none %}
					<a href="{{ admin_change_href }}">edit</a>
					{% endif %}
				</li>

				{% endfor %}

			</ol>
		</div>


		{% endfor %}

	</div>
	<div class="drawer-overlay"></div>
</nav>

{% endblock nav_drawer %}

{% block content %}

<div class="container-xl pt-4">

	 {% if featured_artwork %}
        <h2>Featured Artwork</h2>
        {% for asset in featured_artwork %}
            <img src="{{ asset.static_asset.preview.url }}" height="100">
        {% endfor %}
    {% endif %}


	{% for collection, child_collections in collections.items %}
	<div>
		<h2><a href="{{ collection.url }}">{{ collection.name }}</a></h2>
		<div>
			{% for child_collection in child_collections %}
			<p><a href="{{ child_collection.url }}">{{ child_collection.name }}</a></p>
			{% endfor %}
		</div>
	</div>

	{% endfor %}

</div>
{% endblock content %}
