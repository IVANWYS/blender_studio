{% extends 'films/base_films.html' %}
{% load static %}

{% block bodyclasses %}
has-nav-drawer
has-secondary-nav
{% endblock bodyclasses %}

{% block nav_drawer_inner %}

<div class="drawer-nav-header">
	<p class="subtitle">Gallery</p>
	<h2>{{ film.title }}</h2>
</div>
{% if featured_artwork %}
<div class="drawer-nav-group">
	<ol class="drawer-nav-list">
		<li class="drawer-nav-section">
			<!-- TODO(Mike): active state JS -->
			<a href="{% url 'film-gallery' film_slug=film.slug %}" class="drawer-nav-section-link {% if active %}active{% endif %}">
				<div class="drawer-nav-section-icon">
					<i class="material-icons">view_carousel</i>
					<svg width="30" height="30" class="drawer-nav-section-icon-progress">
						<circle cx="15" cy="15" r="14" />
					</svg>
				</div>
				<div>
					<p class="subtitle x-small">Collection</p>
					<h4>Featured Artwork</h4>
				</div>
			</a>
			{% if admin_change_href is not none %}
			<a href="{{ admin_change_href }}">edit</a>
			{% endif %}
		</li>
	</ol>
</div>
{% endif %}
{% for collection, child_collections in collections.items %}

<div class="drawer-nav-group">
	<h3 class="drawer-nav-dropdown {% if collapsed %}collapsed{% endif %}" data-toggle="collapse"
		data-target="#gallery-modal">
		<i class="material-icons">keyboard_arrow_down</i>
		{{ collection.name }}
	</h3>
	<ol id="collection-{{ collection.id }}" class="drawer-nav-list collapse {% if not collapsed %}show{% endif %}">

		{% for child_collection in child_collections %}
		<li class="drawer-nav-section">
			<a href="{{ child_collection.url }}" class="drawer-nav-section-link {% if active %}active{% endif %}">
				<div class="drawer-nav-section-icon">
					<i class="material-icons">view_carousel</i>
					<svg width="30" height="30" class="drawer-nav-section-icon-progress">
						<circle cx="15" cy="15" r="14" />
					</svg>
				</div>
				<div>
					<p class="subtitle x-small">Collection</p>
					<h4>{{ child_collection.name }}</h4>
				</div>
			</a>
			{% if admin_change_href is not none %}
			<a href="{{ admin_change_href }}">edit</a>
			{% endif %}
		</li>

		{% endfor %}

	</ol>
</div>
{% endfor %}

{% endblock nav_drawer_inner %}

{% block content %}

<div class="container-xl pt-3">

	{% block gallery_files %}
	<div>

		<p class="subtitle">{{ film.title }}</p>
		<h2>Featured Artowrk</h2>

		<div class="files">
			<div class="row row-cols-2 row-cols-sm-3 row-cols-md-2 row-cols-lg-3 row-cols-xl-4">


				{% if featured_artwork %}
                    {% for asset in featured_artwork %}
                        {% include "components/file.html" with asset=asset %}
                    {% endfor %}
				{% endif %}

			</div>
		</div>

	</div>
	{% endblock gallery_files %}

</div>

<div id="gallery-modal" class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Modal body text goes here.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary">Save changes</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

{% endblock content %}

{% block content_extra %}
    {% if featured_artwork %}
        {% for asset in featured_artwork %}
            {% include "components/modal_asset.html" with asset=asset %}
            {% include "components/modal_asset_zoom.html" with asset=asset %}
        {% endfor %}
    {% endif %}
{% endblock content_extra %}
